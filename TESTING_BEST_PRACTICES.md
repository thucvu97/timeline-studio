# üß™ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Timeline Studio

## üéØ –ë—ã—Å—Ç—Ä—ã–π —á–µ–∫–ª–∏—Å—Ç

### ‚úÖ –ü–µ—Ä–µ–¥ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ–º —Ç–µ—Å—Ç–∞

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –º–æ–∫–∏** –≤ `src/test/setup.ts`
2. **–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —É—Ç–∏–ª–∏—Ç—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞**:
   - `render` - –¥–ª—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - `renderWithBase` - –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –±–∞–∑–æ–≤—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
   - `renderWithProviders` - –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–∫–∏** –¥–ª—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### ‚úÖ –ü—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ —Ç–µ—Å—Ç–∞

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `data-testid`** –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
2. **–ú–æ–∫–∏—Ä—É–π—Ç–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è**, –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
3. **–û—á–∏—â–∞–π—Ç–µ –º–æ–∫–∏** –≤ `beforeEach`
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**, –Ω–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é

### ‚úÖ –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö

1. **"No export defined on mock"** ‚Üí –¥–æ–±–∞–≤—å—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç –≤ –º–æ–∫
2. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è** ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Ç–∏–ª–∏—Ç—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–æ–∫–æ–≤** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `vi.unmock()` –∏–ª–∏ –∏—Å–ø—Ä–∞–≤—å—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–π –º–æ–∫

## üîß –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–∫–æ–Ω–∫–∏ lucide-react

```typescript
// ‚ùå –û—à–∏–±–∫–∞: No "AlertTriangle" export is defined
// ‚úÖ –†–µ—à–µ–Ω–∏–µ: –¥–æ–±–∞–≤–∏—Ç—å –≤ setup.ts
vi.mock("lucide-react", () => ({
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–∫–æ–Ω–∫–∏
  AlertTriangle: createMockIcon("AlertTriangle"),
  Subtitles: createMockIcon("Subtitles"),
}));
```

### 2. –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –º–æ–∫–æ–≤

```typescript
// ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –ª–æ–∫–∞–ª—å–Ω—ã–π –º–æ–∫ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π
vi.mock("lucide-react", () => ({
  Play: () => <div>Play</div>
  // –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –¥—Ä—É–≥–∏–µ –∏–∫–æ–Ω–∫–∏ –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –º–æ–∫–∞
}))

// ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: –¥–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∫–æ–Ω–∫–∏
vi.mock("lucide-react", () => ({
  Play: () => <div>Play</div>,
  AlertTriangle: () => <div>AlertTriangle</div>,
  // ... –¥—Ä—É–≥–∏–µ –∏–∫–æ–Ω–∫–∏
}))

// ‚úÖ –†–µ—à–µ–Ω–∏–µ 2: —É–±—Ä–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –º–æ–∫, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π
// –£–¥–∞–ª–∏—Ç—å vi.mock("lucide-react") –∏–∑ —Ç–µ—Å—Ç–∞
```

### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

```typescript
// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
import { render } from '@testing-library/react'
render(<ComponentWithProviders />)

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
import { renderWithBase } from '@/test/test-utils'
renderWithBase(<ComponentWithProviders />)
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å –ª–æ–≥–∏–∫–æ–π

```typescript
// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: –≥–ª–æ–±–∞–ª—å–Ω—ã–π –º–æ–∫ –º–µ—à–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
// –ì–ª–æ–±–∞–ª—å–Ω—ã–π –º–æ–∫ –≤ setup.ts –ø—Ä–æ—Å—Ç–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç children

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –æ—Ç–∫–ª—é—á–∏—Ç—å –º–æ–∫ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
vi.unmock("@/i18n/i18n-provider")
import { I18nProvider } from "./i18n-provider"
```

## üìù –®–∞–±–ª–æ–Ω—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤

### –ë–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```typescript
import { describe, expect, it, vi } from 'vitest'
import { renderWithBase, screen } from '@/test/test-utils'
import { MyComponent } from './my-component'

describe('MyComponent', () => {
  it('–¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è', () => {
    renderWithBase(<MyComponent />)
    expect(screen.getByTestId('my-component')).toBeInTheDocument()
  })
})
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –∏–∫–æ–Ω–∫–∞–º–∏

```typescript
// –ï—Å–ª–∏ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∫–æ–Ω–∫–∏, –¥–æ–±–∞–≤—å—Ç–µ –∏—Ö –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –º–æ–∫
vi.mock('lucide-react', () => ({
  // –í–∫–ª—é—á–∏—Ç–µ –≤—Å–µ –∏–∫–æ–Ω–∫–∏ –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –º–æ–∫–∞ + –Ω–æ–≤—ã–µ
  Play: () => <div data-testid="play-icon" />,
  NewIcon: () => <div data-testid="new-icon" />,
}))
```

### XState –º–∞—à–∏–Ω–∞

```typescript
import { createActor } from 'xstate'
import { myMachine } from './my-machine'

describe('MyMachine', () => {
  it('–¥–æ–ª–∂–Ω–∞ –Ω–∞—á–∏–Ω–∞—Ç—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏', () => {
    const actor = createActor(myMachine)
    actor.start()
    
    expect(actor.getSnapshot().value).toBe('idle')
  })
})
```

## üöÄ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```bash
# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
bun run test src/path/to/test.test.tsx

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
bun run test src/path/to/test.test.tsx --reporter=verbose

# –ó–∞–ø—É—Å–∫ –≤ watch —Ä–µ–∂–∏–º–µ
bun run test:watch src/path/to/test.test.tsx

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
bun run test
```

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Vitest Documentation](https://vitest.dev/)
- [Testing Library](https://testing-library.com/)
- [XState Testing](https://xstate.js.org/docs/guides/testing.html)
- [–û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](./AGENT.md#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ê–Ω–∞–ª–∏–∑ –ø–æ–∫—Ä—ã—Ç–∏—è](./TESTING_COVERAGE_ANALYSIS.md)
