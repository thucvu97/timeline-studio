# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Specta-rs –¥–ª—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ API

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ (–±–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π  
**–î–µ–¥–ª–∞–π–Ω:** 10.07.2025  
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Backend Team  

## üéØ –¶–µ–ª—å

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É Specta-rs –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ TypeScript —Ç–∏–ø–æ–≤ –∏–∑ Rust —Å—Ç—Ä—É–∫—Ç—É—Ä, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –º–µ–∂–¥—É backend –∏ frontend —Å–ª–æ—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üìù –ö–æ–Ω—Ç–µ–∫—Å—Ç

–í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ EventBus API –∏ Plugin System –≤—ã—è–≤–∏–ª–∞—Å—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –º–µ–∂–¥—É Rust –∏ TypeScript. –†—É—á–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:
- –û—à–∏–±–∫–∞–º –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ
- –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—é —Ç–∏–ø–æ–≤ –º–µ–∂–¥—É —Å–ª–æ—è–º–∏
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö API

Specta-rs –ø–æ–∑–≤–æ–ª–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å TypeScript –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑ Rust —Ç–∏–ø–æ–≤, —á—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è:
- EventBus —Å–æ–±—ã—Ç–∏–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
- Plugin API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- Tauri –∫–æ–º–∞–Ω–¥ –∏ –∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–±–µ–∑ –±–æ–ª—å—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)

1. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ Cargo.toml**:
```toml
[dependencies]
specta = { version = "2.0", features = ["serde"] }

[build-dependencies]
specta-typescript = "0.3"
```

2. **–°–æ–∑–¥–∞–Ω–∏–µ build.rs –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤**:
```rust
use specta::{Type, TypeCollection};
use specta_typescript::Typescript;

fn main() {
    // –°–æ–±–∏—Ä–∞–µ–º —Ç–∏–ø—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
    let types = TypeCollection::default()
        .register::<AppEvent>()
        .register::<EventPriority>()
        .register::<CancellationToken>()
        .register::<PluginCommand>()
        .register::<PluginResponse>();
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º TypeScript —Ñ–∞–π–ª
    Typescript::default()
        .export_to("./src/types/generated-backend.ts", &types)
        .unwrap();
}
```

3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ derive –º–∞–∫—Ä–æ—Å–∞ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º**:
```rust
#[derive(Debug, Clone, Serialize, Deserialize, Type)]
pub struct Event {
    pub id: String,
    pub event_type: String,
    pub data: Value,
    pub timestamp: u64,
}

#[derive(Debug, Clone, Serialize, Deserialize, Type)]
pub enum AppEvent {
    ProjectCreated { project_id: String },
    RenderingStarted { task_id: String },
    MediaImported { file_path: String },
    // ...
}
```

### –û–±–ª–∞—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

1. **EventBus —Ç–∏–ø—ã** (src-tauri/src/core/events.rs):
   - Event, AppEvent, EventHandler traits
   - –ë—É–¥—É—â–∏–µ EventPriority, CancellationToken

2. **Plugin API —Ç–∏–ø—ã** (src-tauri/src/core/plugins/):
   - PluginCommand, PluginResponse
   - PluginInfo, PluginCapability

3. **Tauri –∫–æ–º–∞–Ω–¥—ã** (src-tauri/src/commands/):
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥
   - –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

4. **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö** (src-tauri/src/models/):
   - Project, Timeline, Clip —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–∏–ø—ã

## üèóÔ∏è –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (1 –¥–µ–Ω—å)
- [x] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ specta –∏ specta-typescript
- [x] –°–æ–∑–¥–∞—Ç—å build.rs —Å –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—É—Ç—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ TypeScript —Ñ–∞–π–ª–æ–≤
- [x] –î–æ–±–∞–≤–∏—Ç—å generated —Ñ–∞–π–ª—ã –≤ .gitignore

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å EventBus (2 –¥–Ω—è)
- [x] –î–æ–±–∞–≤–∏—Ç—å `#[derive(Type)]` –∫ Event —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º
- [x] –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å AppEvent enum –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã
- [x] –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å specta_export.rs –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤

### –≠—Ç–∞–ø 3: Plugin API —Ç–∏–ø—ã (1 –¥–µ–Ω—å)
- [x] –ê–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞—Ç—å Plugin API —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [x] –î–æ–±–∞–≤–∏—Ç—å Type derive –∫ PluginCommand, PluginResponse, PluginState –∏ –¥—Ä.
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø–ª–∞–≥–∏–Ω–æ–≤

### –≠—Ç–∞–ø 4: Tauri –∫–æ–º–∞–Ω–¥—ã (2 –¥–Ω—è)
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tauri-specta –¥–ª—è –∫–æ–º–∞–Ω–¥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ò–ª–∏ –≤—Ä—É—á–Ω—É—é –∞–Ω–Ω–æ—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Ö—É–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤

### –≠—Ç–∞–ø 5: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏ CI (1 –¥–µ–Ω—å)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –≤ CI
- [ ] –°–æ–∑–¥–∞—Ç—å pre-commit hook –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

## üß™ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [x] TypeScript —Ç–∏–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
- [x] –ù–µ—Ç —Ä—É—á–Ω–æ–≥–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤ –º–µ–∂–¥—É Rust –∏ TS
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã feature flags –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ chrono, uuid, serde_json
- [x] –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (–∫–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç)
- [x] –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- [ ] CI –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ–¥—Ö–æ–¥–∞

1. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: –¢–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ derive –º–∞–∫—Ä–æ—Å–æ–≤
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –¢–∏–ø—ã –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã
3. **–õ—É—á—à–µ, —á–µ–º –ø–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥**: –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è
4. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è**: –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–∏–ø—ã –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üö® –†–∏—Å–∫–∏

- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**: Mitigation - Specta –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Tauri —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏**: Mitigation - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ build.rs
- **–û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã**: Mitigation - –ü—Ä–æ—Å—Ç–æ–π API, –ø–æ—Ö–æ–∂ –Ω–∞ serde

## üìö –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

1. **ts-rs**: –ü–æ—Ö–æ–∂–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –Ω–æ Specta –ª—É—á—à–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Tauri
2. **–†—É—á–Ω–æ–µ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç–∏–ø–æ–≤**: –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥, error-prone
3. **JSON Schema**: –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –ø–æ–¥—Ö–æ–¥, —Ç—Ä–µ–±—É–µ—Ç runtime –≤–∞–ª–∏–¥–∞—Ü–∏–∏

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

- EventBus API Extensions - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å —Ç–∏–ø–æ–≤
- Plugin System Development - –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ–º API
- Frontend Type Safety Improvements - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∏–ø—ã

---

*–°–æ–∑–¥–∞–Ω–æ: 29 –∏—é–Ω—è 2025*  
*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 29 –∏—é–Ω—è 2025*  
*–í–µ—Ä—Å–∏—è: 1.0.0*