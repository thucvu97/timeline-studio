# Структура компонентов Codecov

Этот документ описывает компонентное отслеживание покрытия кода в Timeline Studio.

## Обзор

Timeline Studio использует систему управления компонентами Codecov для отслеживания покрытия кода отдельно для каждого функционального модуля. Это обеспечивает детальную видимость того, какие части кодовой базы нуждаются в дополнительном тестировании.

## Frontend компоненты (28 фич)

Каждая frontend фича в `src/features/` отслеживается как отдельный компонент:

### Основное редактирование (5 компонентов)
- **timeline** - Основная функциональность редактирования таймлайна
- **video-player** - Воспроизведение видео и элементы управления
- **media-studio** - Главный интерфейс редактирования
- **export** - Функциональность экспорта с поддержкой множества форматов
- **video-compiler** - Рендеринг и компиляция видео

### AI и распознавание (2 компонента)
- **ai-chat** - Интеграция AI-ассистента
- **recognition** - Распознавание объектов/лиц на основе YOLO

### Управление медиа (2 компонента)
- **browser** - Файловый браузер и управление
- **media** - Обработка медиафайлов и метаданных

### Эффекты и стилизация (6 компонентов)
- **effects** - Библиотека визуальных эффектов
- **filters** - Видеофильтры
- **transitions** - Эффекты переходов
- **style-templates** - Анимированные интро/аутро
- **templates** - Шаблоны многокамерной раскладки
- **subtitles** - Система субтитров с анимациями

### Состояние приложения (5 компонентов)
- **app-state** - Глобальное состояние приложения
- **project-settings** - Конфигурация проекта
- **user-settings** - Пользовательские настройки
- **modals** - Система модальных диалогов
- **resources** - Управление панелью ресурсов

### Ввод и запись (3 компонента)
- **keyboard-shortcuts** - Система горячих клавиш
- **camera-capture** - Запись с веб-камеры
- **voice-recording** - Запись аудио

### UI и утилиты (5 компонентов)
- **music** - Управление музыкальной библиотекой
- **options** - Опции приложения
- **top-bar** - Верхняя панель навигации
- **i18n** - Интернационализация (10 языков)

## Backend компоненты (4 фичи)

Rust backend разделен на 4 основных компонента:

### Основные функции
- **backend-video-compiler** - Интеграция FFmpeg и рендеринг видео
- **backend-media** - Обработка медиа, миниатюры, метаданные
- **backend-recognition** - Интеграция YOLO v11 для AI распознавания
- **backend-core** - Основная функциональность Tauri, команды и состояние

## Цели покрытия

- **Общий проект**: 80% покрытия
- **Новый код (патчи)**: 70% покрытия
- **Frontend фичи**: 75% покрытия
- **Rust Backend**: 85% покрытия

## Просмотр покрытия

Отчеты о покрытии доступны по адресам:
- [Общее покрытие](https://codecov.io/gh/chatman-media/timeline-studio)
- [Frontend покрытие](https://codecov.io/gh/chatman-media/timeline-studio?flag=frontend)
- [Rust покрытие](https://codecov.io/gh/chatman-media/timeline-studio?flag=rust)

Каждый компонент можно просмотреть отдельно в панели управления Codecov на вкладке "Components".

## Добавление новых компонентов

При добавлении новой фичи:
1. Создайте директорию фичи в `src/features/` (frontend) или `src-tauri/src/` (backend)
2. Добавьте конфигурацию компонента в `codecov.yml`
3. Убедитесь, что тесты включены в ту же директорию фичи в папке `__tests__/`
4. Запустите покрытие локально с помощью `bun run test:coverage` или `bun run test:coverage:rust`