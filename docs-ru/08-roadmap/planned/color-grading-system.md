# Color Grading System - ะัะพัะตััะธะพะฝะฐะปัะฝะฐั ัะฒะตัะพะบะพััะตะบัะธั

## ๐ ะะฑะทะพั

Color Grading System - ััะพ ะฟัะพัะตััะธะพะฝะฐะปัะฝัะน ะผะพะดัะปั ัะฒะตัะพะบะพััะตะบัะธะธ ะดะปั Timeline Studio, ะพะฑะตัะฟะตัะธะฒะฐััะธะน ะฒะพะทะผะพะถะฝะพััะธ ััะพะฒะฝั DaVinci Resolve. ะกะธััะตะผะฐ ะฟัะตะดะพััะฐะฒะปัะตั ะฟะพะปะฝัะน ะบะพะฝััะพะปั ะฝะฐะด ัะฒะตัะพะผ, ะบะพะฝััะฐััะพะผ ะธ ััะธะปะธะทะฐัะธะตะน ะฒะธะดะตะพ ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะธะฝะดััััะธะฐะปัะฝัั ััะฐะฝะดะฐััะพะฒ ะธ ะธะฝััััะผะตะฝัะพะฒ.

## ๐ฏ ะฆะตะปะธ ะธ ะทะฐะดะฐัะธ

### ะัะฝะพะฒะฝัะต ัะตะปะธ:
1. **ะัะพัะตััะธะพะฝะฐะปัะฝะฐั ัะฒะตัะพะบะพััะตะบัะธั** - ะฟะพะปะฝัะน ะฝะฐะฑะพั ะธะฝััััะผะตะฝัะพะฒ ะดะปั ัะฐะฑะพัั ั ัะฒะตัะพะผ
2. **ะะตะฐะปัะฝะพะต ะฒัะตะผั** - ะผะณะฝะพะฒะตะฝะฝัะน preview ะฒัะตั ะธะทะผะตะฝะตะฝะธะน
3. **ะกะพะฒะผะตััะธะผะพััั** - ะฟะพะดะดะตัะถะบะฐ LUT, HDR, ัะธัะพะบะพะณะพ ัะฒะตัะพะฒะพะณะพ ะพัะฒะฐัะฐ
4. **ะญััะตะบัะธะฒะฝะพััั** - GPU ััะบะพัะตะฝะธะต ะดะปั 4K/8K ะบะพะฝัะตะฝัะฐ

### ะะปััะตะฒัะต ะฒะพะทะผะพะถะฝะพััะธ:
- ะะตัะฒะธัะฝะฐั ะธ ะฒัะพัะธัะฝะฐั ัะฒะตัะพะบะพััะตะบัะธั
- ะะฐะฑะพัะฐ ั ะผะฐัะบะฐะผะธ ะธ ะฒัะดะตะปะตะฝะธัะผะธ
- ะัะพัะตััะธะพะฝะฐะปัะฝัะต scopes
- ะฃะทะปะพะฒะฐั ัะธััะตะผะฐ ะพะฑัะฐะฑะพัะบะธ
- ะะพะดะดะตัะถะบะฐ HDR ะธ ัะธัะพะบะพะณะพ ัะฒะตัะพะฒะพะณะพ ะพัะฒะฐัะฐ

## ๐๏ธ ะขะตัะฝะธัะตัะบะฐั ะฐััะธัะตะบัััะฐ

### Frontend ััััะบัััะฐ:
```
src/features/color-grading/
โโโ components/
โ   โโโ color-wheels/          # ะฆะฒะตัะพะฒัะต ะบะพะปะตัะฐ Lift/Gamma/Gain
โ   โโโ curves/                # RGB ะธ ัะพะฝะฐะปัะฝัะต ะบัะธะฒัะต
โ   โโโ scopes/                # Waveform, Vectorscope, Histogram
โ   โโโ masks/                 # Power windows ะธ ะผะฐัะบะธ
โ   โโโ nodes/                 # ะฃะทะปะพะฒะพะน ัะตะดะฐะบัะพั
โ   โโโ panels/                # UI ะฟะฐะฝะตะปะธ
โโโ hooks/
โ   โโโ use-color-grading.ts   # ะัะฝะพะฒะฝะพะน ััะบ
โ   โโโ use-scopes.ts          # ะะฝะฐะปะธะท ะธะทะพะฑัะฐะถะตะฝะธั
โ   โโโ use-lut.ts             # ะะฐะฑะพัะฐ ั LUT
โโโ services/
โ   โโโ color-engine.ts        # ะะฒะธะถะพะบ ัะฒะตัะพะบะพััะตะบัะธะธ
โ   โโโ gpu-processor.ts       # GPU ะพะฑัะฐะฑะพัะบะฐ
โ   โโโ color-space.ts         # ะะพะฝะฒะตััะธั ัะฒะตัะพะฒัั ะฟัะพัััะฐะฝััะฒ
โโโ shaders/                   # WebGL ัะตะนะดะตัั
โโโ types/                     # TypeScript ัะธะฟั
```

### Backend ััััะบัััะฐ (Rust):
```
src-tauri/src/color_grading/
โโโ mod.rs                     # ะะปะฐะฒะฝัะน ะผะพะดัะปั
โโโ color_processor.rs         # ะะฑัะฐะฑะพัะบะฐ ัะฒะตัะฐ
โโโ lut_manager.rs            # ะฃะฟัะฐะฒะปะตะฝะธะต LUT ัะฐะนะปะฐะผะธ
โโโ hdr_processor.rs          # HDR ะพะฑัะฐะฑะพัะบะฐ
โโโ gpu_acceleration.rs       # GPU ััะบะพัะตะฝะธะต ัะตัะตะท wgpu
โโโ commands.rs               # Tauri ะบะพะผะฐะฝะดั
```

## ๐ ะคัะฝะบัะธะพะฝะฐะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

### 1. ะะตัะฒะธัะฝะฐั ัะฒะตัะพะบะพััะตะบัะธั

#### ะฆะฒะตัะพะฒัะต ะบะพะปะตัะฐ (Color Wheels):
- **Lift** - ัะตะฝะธ
- **Gamma** - ััะตะดะฝะธะต ัะพะฝะฐ  
- **Gain** - ัะฒะตัะฐ
- **Offset** - ะพะฑัะธะน ัะดะฒะธะณ

#### ะะฐัะฐะผะตััั:
- **Temperature** - ัะฒะตัะพะฒะฐั ัะตะผะฟะตัะฐัััะฐ
- **Tint** - ะพััะตะฝะพะบ
- **Contrast** - ะบะพะฝััะฐัั
- **Pivot** - ัะพัะบะฐ ะบะพะฝััะฐััะฐ
- **Saturation** - ะฝะฐัััะตะฝะฝะพััั
- **Hue** - ัะดะฒะธะณ ะพััะตะฝะบะฐ
- **Luminance** - ััะบะพััั

### 2. ะัะธะฒัะต (Curves)

#### ะขะธะฟั ะบัะธะฒัั:
- **Master** - ะพะฑัะฐั ัะพะฝะฐะปัะฝะฐั ะบัะธะฒะฐั
- **RGB** - ัะฐะทะดะตะปัะฝัะต ะบะฐะฝะฐะปั R, G, B
- **Hue vs Hue** - ะธะทะผะตะฝะตะฝะธะต ะพััะตะฝะบะฐ
- **Hue vs Saturation** - ะฝะฐัััะตะฝะฝะพััั ะฟะพ ะพััะตะฝะบั
- **Hue vs Luminance** - ััะบะพััั ะฟะพ ะพััะตะฝะบั
- **Luminance vs Saturation** - ะฝะฐัััะตะฝะฝะพััั ะฟะพ ััะบะพััะธ
- **Saturation vs Saturation** - ััะธะปะตะฝะธะต ะฝะฐัััะตะฝะฝะพััะธ

#### ะคัะฝะบัะธะธ:
- ะะตะทัะต ะธะฝัะตัะฟะพะปััะธั
- ะะฝะพะถะตััะฒะตะฝะฝัะต ะบะพะฝััะพะปัะฝัะต ัะพัะบะธ
- ะกะพััะฐะฝะตะฝะธะต ะฟัะตัะตัะพะฒ ะบัะธะฒัั
- ะะพะฟะธัะพะฒะฐะฝะธะต ะผะตะถะดั ะบะปะธะฟะฐะผะธ

### 3. ะัะพัะธัะฝะฐั ัะฒะตัะพะบะพััะตะบัะธั

#### ะะฝััััะผะตะฝัั ะฒัะดะตะปะตะฝะธั:
- **HSL Qualifier** - ะฒัะดะตะปะตะฝะธะต ะฟะพ ัะฒะตัั
- **Power Windows** - ะณะตะพะผะตััะธัะตัะบะธะต ะผะฐัะบะธ
- **Magic Mask** - AI ะฒัะดะตะปะตะฝะธะต ะพะฑัะตะบัะพะฒ
- **Tracking** - ะพััะปะตะถะธะฒะฐะฝะธะต ะผะฐัะพะบ

#### ะะฐัะฐะผะตััั ะผะฐัะพะบ:
- Feather - ัะฐััััะตะฒะบะฐ
- Opacity - ะฟัะพะทัะฐัะฝะพััั
- Invert - ะธะฝะฒะตััะธั
- Combine - ะบะพะผะฑะธะฝะธัะพะฒะฐะฝะธะต ะผะฐัะพะบ

### 4. ะัะพัะตััะธะพะฝะฐะปัะฝัะต Scopes

#### Waveform:
- RGB parade
- YUV parade
- Luminance only
- ะะตะบัะพัะฝะฐั/ัะฐัััะพะฒะฐั ะพััะธัะพะฒะบะฐ

#### Vectorscope:
- ะกัะฐะฝะดะฐััะฝัะน
- Skin tone indicator
- ะฆะฒะตัะพะฒัะต targets

#### Histogram:
- RGB ัะฐะทะดะตะปัะฝะพ
- Luminance
- ะะพะณะฐัะธัะผะธัะตัะบะฐั ัะบะฐะปะฐ

#### Parade:
- RGB channels
- YUV channels

### 5. ะฃะทะปะพะฒะฐั ัะธััะตะผะฐ (Node-based)

#### ะขะธะฟั ัะทะปะพะฒ:
- **Serial** - ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ
- **Parallel** - ะฟะฐัะฐะปะปะตะปัะฝัะต ะฒะตัะบะธ
- **Layer** - ะฝะฐะปะพะถะตะฝะธะต ั ัะตะถะธะผะฐะผะธ
- **Splitter/Combiner** - ัะฐะทะดะตะปะตะฝะธะต/ะพะฑัะตะดะธะฝะตะฝะธะต

#### ะะพะทะผะพะถะฝะพััะธ:
- Drag & drop ะธะฝัะตััะตะนั
- ะะพะฟะธัะพะฒะฐะฝะธะต ัะทะปะพะฒ
- ะััะฟะฟะธัะพะฒะบะฐ
- ะัะตัะตัั ัะทะปะพะฒัั ะดะตัะตะฒัะตะฒ

### 6. LUT ะฟะพะดะดะตัะถะบะฐ

#### ะคะพัะผะฐัั:
- .cube (ััะฐะฝะดะฐัั)
- .3dl
- .mga
- .m3d

#### ะคัะฝะบัะธะธ:
- ะะผะฟะพัั/ัะบัะฟะพัั LUT
- Preview LUT
- ะกะพะทะดะฐะฝะธะต ัะพะฑััะฒะตะฝะฝัั LUT
- LUT browser ั ะฟัะตะฒัั

### 7. HDR ะธ ัะฒะตัะพะฒัะต ะฟัะพัััะฐะฝััะฒะฐ

#### ะะพะดะดะตัะถะบะฐ:
- **SDR** - Rec.709
- **HDR10** - Rec.2020, PQ
- **HDR10+** - ะดะธะฝะฐะผะธัะตัะบะธะต ะผะตัะฐะดะฐะฝะฝัะต
- **Dolby Vision** - ะฟัะพัะธะปะธ 5, 8.1
- **HLG** - Hybrid Log-Gamma

#### ะฆะฒะตัะพะฒัะต ะฟัะพัััะฐะฝััะฒะฐ:
- sRGB
- Rec.709
- Rec.2020
- DCI-P3
- ACES
- ProPhoto RGB

### 8. ะะฝัะตะณัะฐัะธั ั Timeline

#### ะัะธะผะตะฝะตะฝะธะต:
- ะ ะพัะดะตะปัะฝัะผ ะบะปะธะฟะฐะผ
- ะ ัะตะปัะผ ััะตะบะฐะผ
- ะ ะณััะฟะฟะฐะผ ะบะปะธะฟะพะฒ
- Adjustment layers

#### Workflow:
- ะะพะฟะธัะพะฒะฐะฝะธะต ะฝะฐัััะพะตะบ
- ะกะพััะฐะฝะตะฝะธะต ะฟัะตัะตัะพะฒ
- A/B ััะฐะฒะฝะตะฝะธะต
- ะะตััะธะธ ะบะพััะตะบัะธะธ

## ๐จ UI/UX ะดะธะทะฐะนะฝ

### ะะฐะบะตั ะธะฝัะตััะตะนัะฐ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Color Wheels    โ    Curves       โ    Scopes      โ
โโโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโค
โ โฏ Lift          โ  โฑโฑโฑโฑโฑ         โ โโโโโโโโโโโโ   โ
โ โฏ Gamma         โ โฑ    โฑ         โ โโโโโโโโโโโโ   โ
โ โฏ Gain          โโฑ____โฑ          โ โโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโโโค
โ                   Video Preview                      โ
โ                                                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  Nodes Editor                    โ Inspector        โ
โ  [Input]โ[Node1]โ[Node2]โ[Out]  โ Properties...    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะัะธะฝัะธะฟั ะดะธะทะฐะนะฝะฐ:
1. **ะขะตะผะฝะฐั ัะตะผะฐ** - ะดะปั ัะพัะฝะพะน ะพัะตะฝะบะธ ัะฒะตัะฐ
2. **ะะฐัััะฐะธะฒะฐะตะผัะน layout** - ะฟะฐะฝะตะปะธ ะผะพะถะฝะพ ะฟะตัะตะผะตัะฐัั
3. **ะะพะปะฝะพัะบัะฐะฝะฝัะน ัะตะถะธะผ** - ะดะปั ะดะตัะฐะปัะฝะพะน ัะฐะฑะพัั
4. **ะะพัััะธะต ะบะปะฐะฒะธัะธ** - ะฑัััััะน ะดะพัััะฟ ะบ ััะฝะบัะธัะผ

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### GPU ะพะฑัะฐะฑะพัะบะฐ:

#### WebGL ัะตะนะดะตัั:
```glsl
// ะัะธะผะตั ัะตะนะดะตัะฐ ะดะปั ัะฒะตัะพะฒัั ะบะพะปะตั
uniform vec3 lift;
uniform vec3 gamma;
uniform vec3 gain;

vec3 colorGrade(vec3 color) {
    // Lift (shadows)
    color = color * (1.0 - lift) + lift;
    
    // Gamma (midtones)
    color = pow(color, vec3(1.0) / (gamma + vec3(1.0)));
    
    // Gain (highlights)
    color = color * (gain + vec3(1.0));
    
    return clamp(color, 0.0, 1.0);
}
```

#### ะะฟัะธะผะธะทะฐัะธะธ:
- ะััะธัะพะฒะฐะฝะธะต ะฟัะพะผะตะถััะพัะฝัั ัะตะทัะปััะฐัะพะฒ
- ะะฝะพะณะพะฟะพัะพัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ
- SIMD ะธะฝััััะบัะธะธ
- GPU compute shaders

### ะะฝัะตะณัะฐัะธั ั Video Compiler:

```rust
// ะัะธะผะตะฝะตะฝะธะต ัะฒะตัะพะบะพััะตะบัะธะธ ะฟัะธ ัะตะฝะดะตัะธะฝะณะต
pub struct ColorGradingFilter {
    lift: [f32; 3],
    gamma: [f32; 3],
    gain: [f32; 3],
    lut: Option<Lut3D>,
}

impl ColorGradingFilter {
    pub fn apply_to_frame(&self, frame: &mut VideoFrame) {
        // GPU ะพะฑัะฐะฑะพัะบะฐ ัะตัะตะท wgpu
        self.gpu_process(frame);
    }
}
```

## ๐ ะะปะฐะฝ ัะตะฐะปะธะทะฐัะธะธ

### ะคะฐะทะฐ 1: ะะฐะทะพะฒะฐั ััะฝะบัะธะพะฝะฐะปัะฝะพััั (2 ะฝะตะดะตะปะธ)
- [ ] ะฆะฒะตัะพะฒัะต ะบะพะปะตัะฐ Lift/Gamma/Gain
- [ ] ะะฐะทะพะฒัะต ะฟะฐัะฐะผะตััั (contrast, saturation)
- [ ] Simple RGB curves
- [ ] Waveform scope

### ะคะฐะทะฐ 2: ะะฐััะธัะตะฝะฝัะต ะธะฝััััะผะตะฝัั (3 ะฝะตะดะตะปะธ)
- [ ] ะัะต ัะธะฟั ะบัะธะฒัั
- [ ] HSL qualifier
- [ ] Power windows
- [ ] ะัะต ะฒะธะดั scopes

### ะคะฐะทะฐ 3: ะัะพัะตััะธะพะฝะฐะปัะฝัะต ััะฝะบัะธะธ (3 ะฝะตะดะตะปะธ)
- [ ] ะฃะทะปะพะฒะฐั ัะธััะตะผะฐ
- [ ] LUT ะฟะพะดะดะตัะถะบะฐ
- [ ] HDR ะพะฑัะฐะฑะพัะบะฐ
- [ ] AI ะผะฐัะบะธ

### ะคะฐะทะฐ 4: ะะฟัะธะผะธะทะฐัะธั ะธ ะธะฝัะตะณัะฐัะธั (2 ะฝะตะดะตะปะธ)
- [ ] GPU ััะบะพัะตะฝะธะต
- [ ] ะะฝัะตะณัะฐัะธั ั timeline
- [ ] ะัะตัะตัั ะธ templates
- [ ] ะขะตััะธัะพะฒะฐะฝะธะต ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

## ๐ฏ ะะตััะธะบะธ ััะฟะตัะฐ

### ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั:
- Real-time preview ะดะปั 4K ะฟัะธ 30fps
- <100ms ะฟัะธะผะตะฝะตะฝะธะต LUT
- <50ms ะพะฑะฝะพะฒะปะตะฝะธะต scopes

### ะะฐัะตััะฒะพ:
- 32-bit float ะพะฑัะฐะฑะพัะบะฐ
- ะะตะท ะฒะธะดะธะผัั ะฐััะตัะฐะบัะพะฒ
- ะขะพัะฝะพะต ัะพะพัะฒะตัััะฒะธะต ััะฐะปะพะฝะฝัะผ LUT

### ะฃะดะพะฑััะฒะพ:
- <5 ะผะธะฝัั ะฝะฐ ะฑะฐะทะพะฒัั ะบะพััะตะบัะธั
- ะะฝััะธัะธะฒะฝัะน ะธะฝัะตััะตะนั
- ะกะพะฒะผะตััะธะผะพััั ั DaVinci ะณะพัััะธะผะธ ะบะปะฐะฒะธัะฐะผะธ

## ๐ ะะฝัะตะณัะฐัะธั

### ะก ะดััะณะธะผะธ ะผะพะดัะปัะผะธ:
- **Timeline** - ะฟัะธะผะตะฝะตะฝะธะต ะบ ะบะปะธะฟะฐะผ
- **Effects** - ะบะพะผะฑะธะฝะธัะพะฒะฐะฝะธะต ั ัััะตะบัะฐะผะธ
- **Export** - ัะฒะตัะพะฒัะต ะฟัะพัะธะปะธ ะฟัะธ ัะบัะฟะพััะต
- **AI** - ะฐะฒัะพะผะฐัะธัะตัะบะฐั ะบะพััะตะบัะธั

### API ะดะปั ะฟะปะฐะณะธะฝะพะฒ:
```typescript
interface ColorGradingAPI {
    applyLUT(lutPath: string): void;
    getScopes(): ScopesData;
    setColorWheels(lift: RGB, gamma: RGB, gain: RGB): void;
    createNode(type: NodeType): ColorNode;
}
```

## ๐ ะกะฟัะฐะฒะพัะฝัะต ะผะฐัะตัะธะฐะปั

- [DaVinci Resolve Color Manual](https://www.blackmagicdesign.com/products/davinciresolve)
- [Color Grading Central](https://www.colorgradingcentral.com/)
- [Lift Gamma Gain](https://liftgammagain.com/)
- [ACES Workflow](https://acescentral.com/)

---

*ะะพะบัะผะตะฝั ะฑัะดะตั ะพะฑะฝะพะฒะปััััั ะฟะพ ะผะตัะต ัะฐะทัะฐะฑะพัะบะธ ะผะพะดัะปั*