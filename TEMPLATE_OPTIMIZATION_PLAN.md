# ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —à–∞–±–ª–æ–Ω–æ–≤ - –í–´–ü–û–õ–ù–ï–ù–û

## üéØ –¶–µ–ª—å
–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏, –∏—Å–ø–æ–ª—å–∑—É—è —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É.

## üìä –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã

### –ß—Ç–æ –±—ã–ª–æ
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç** PREVIEW_SIZES –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞** –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
- **–†–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞** —Ä–∞–∑–º–µ—Ä–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### –ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏
- ‚úÖ **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã** —Ä–∞–∑–º–µ—Ä–æ–≤ –ø—Ä–µ–≤—å—é
- ‚úÖ **–î–æ–±–∞–≤–∏–ª–∏ –º–∏–Ω–∏–º—É–º 150px** –ø–æ –¥–ª–∏–Ω–Ω–æ–º—É –∫—Ä–∞—é –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∑—É–º** –≤ —Ç—É–ª–±–∞—Ä–µ
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–∏–ª–∏ –≤—Å—é —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç —Ä–∞–∑–º–µ—Ä–æ–≤ –ø—Ä–µ–≤—å—é

#### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏
–°–æ–∑–¥–∞–ª–∏ –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –≤ `src/lib/constants/preview-sizes.ts`:

```typescript
// –ï–¥–∏–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
export const PREVIEW_SIZES = [100, 125, 150, 200, 250, 300, 400, 500] as const;
export const DEFAULT_SIZE = 100;
export const MIN_SIZE = 100;
export const MAX_SIZE = 500;

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
export const DEFAULT_CONTENT_SIZES: Record<PreviewSizeKey, PreviewSize> = {
  MEDIA: 100,
  TEMPLATES: 150,       // –ë–æ–ª—å—à–µ –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
  STYLE_TEMPLATES: 125,
  EFFECTS: 100,
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ
};
```

#### ‚úÖ –û–±–Ω–æ–≤–∏–ª–∏ –≤—Å–µ —Ñ–∞–π–ª—ã
- `user-settings-machine.ts` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- `browser-state-machine.ts` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- `app-settings-machine.ts` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DEFAULT_CONTENT_SIZES

### 2. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤

#### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏
–î–æ–±–∞–≤–∏–ª–∏ –ª–æ–≥–∏–∫—É –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ 150px –ø–æ –¥–ª–∏–Ω–Ω–æ–º—É –∫—Ä–∞—é:

```typescript
// src/lib/constants/preview-sizes.ts
export function calculateDimensionsWithAspectRatio(
  baseSize: PreviewSize,
  aspectRatio: { width: number; height: number },
  isTemplate: boolean = false
): { width: number; height: number } {
  // –î–ª—è —à–∞–±–ª–æ–Ω–æ–≤ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–∏–Ω–∏–º—É–º 150px –ø–æ –¥–ª–∏–Ω–Ω–æ–º—É –∫—Ä–∞—é
  const minTemplateSize = isTemplate ? 150 : 0;
  const effectiveSize = isTemplate ? Math.max(baseSize, minTemplateSize) : baseSize;

  // –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤ —Å —É—á–µ—Ç–æ–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω
  // ...
}
```

#### ‚úÖ –û–±–Ω–æ–≤–∏–ª–∏ TemplatePreview
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞–∑–º–µ—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–Ω–∏–º—É–º 150px
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ª—é–±–æ–≥–æ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ç–æ—Ä–æ–Ω (16:9, 9:16, 1:1)

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

#### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏
- **–ó—É–º –≤ —Ç—É–ª–±–∞—Ä–µ** - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ –∑—É–º–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —ç–∫—Ä–∞–Ω–æ–≤
- **–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É
- **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ** - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

#### ‚úÖ –û–±–Ω–æ–≤–∏–ª–∏ browser-content.tsx
- –ò—Å–ø—Ä–∞–≤–∏–ª–∏ –≥—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∑—É–º–∞
- –ü–µ—Ä–µ–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è `canZoomIn` –∏ `canZoomOut`

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–∏
1. **–ï–¥–∏–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ä–∞–∑–º–µ—Ä–æ–≤** - –Ω–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–ú–∏–Ω–∏–º—É–º 150px –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤** - –ª—É—á—à–µ –≤–∏–¥–Ω–æ –¥–µ—Ç–∞–ª–∏
3. **–†–∞–±–æ—Ç–∞—é—â–∏–π –∑—É–º** - –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å/—É–º–µ–Ω—å—à–∞—Ç—å —Ä–∞–∑–º–µ—Ä
4. **–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç** - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ –Ω–∞—Ä—É—à–µ–Ω–∞
5. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

### üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- `src/lib/constants/preview-sizes.ts` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –µ–¥–∏–Ω—ã–º–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏
- `src/features/user-settings/services/user-settings-machine.ts` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- `src/components/common/browser-state-machine.ts` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- `src/features/app-state/services/app-settings-machine.ts` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- `src/features/templates/components/template-preview.tsx` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É —Ä–∞–∑–º–µ—Ä–æ–≤
- `src/features/browser/components/browser-content.tsx` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã –∑—É–º–∞
- `src/features/templates/tests/template-preview.test.tsx` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã

### üö´ –ß—Ç–æ –ù–ï –¥–µ–ª–∞–ª–∏ (–ø–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É)
- –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (compact/comfortable/spacious)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∏ (–≤–∫–ª/–≤—ã–∫–ª)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–∫—Ä–∞–Ω–æ–≤ (–≤–∫–ª/–≤—ã–∫–ª)
- –≠—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ (–≤–∫–ª/–≤—ã–∫–ª)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–ª–æ–Ω–æ–∫ (–º–∏–Ω/–º–∞–∫—Å)
- –°–ª–æ–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫

## üí° –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. **–û—Ç–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥–∫—É Templates**
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –∑—É–º–∞** –≤ —Ç—É–ª–±–∞—Ä–µ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
3. **–®–∞–±–ª–æ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –±—É–¥—É—Ç –º–∏–Ω–∏–º—É–º 150px –ø–æ –¥–ª–∏–Ω–Ω–æ–º—É –∫—Ä–∞—é
4. **–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** –∫–∞–∫ —Ä–∞–Ω—å—à–µ - –ø–æ–∏—Å–∫, –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞, –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

–ü—Ä–æ—Å—Ç–æ–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ! üéâ
