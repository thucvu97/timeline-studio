# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç Timeline Studio —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –≤ —Ñ–∞–π–ª–∞—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ (.tlsp) –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏—Ö –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–¥–∏–∞–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ —Ä–∞–±–æ—Ç—ã.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** (`src/types/saved-media.ts`)
   - `SavedMediaFile` - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
   - `SavedMusicFile` - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –º—É–∑—ã–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
   - `ProjectMediaLibrary` - –º–µ–¥–∏–∞–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
   - `ProjectFile` - –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞

2. **–£—Ç–∏–ª–∏—Ç—ã** (`src/lib/saved-media-utils.ts`)
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏ MediaFile –∏ SavedMediaFile
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID —Ñ–∞–π–ª–æ–≤
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤
   - –†–∞–±–æ—Ç–∞ —Å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏

3. **–°–µ—Ä–≤–∏—Å—ã**
   - `ProjectFileService` - –∑–∞–≥—Ä—É–∑–∫–∞/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤
   - `MediaRestorationService` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤

4. **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
   - `MissingFilesDialog` - –¥–∏–∞–ª–æ–≥ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤
   - `useMediaRestoration` - —Ö—É–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º

## –ü—Ä–æ—Ü–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤

### 1. –ò–º–ø–æ—Ä—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤

–ü—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ `useMediaImport` –∏–ª–∏ `useMusicImport`:

```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
const saveFilesToProject = async (files: MediaFile[]) => {
  if (!currentProject.path || files.length === 0) return

  // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º MediaFile –≤ SavedMediaFile
  const savedFiles = await Promise.all(
    files.map(file => convertToSavedMediaFile(file, currentProject.path))
  )

  // –û—Ç–º–µ—á–∞–µ–º –ø—Ä–æ–µ–∫—Ç –∫–∞–∫ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–π
  setProjectDirty(true)
}
```

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

```typescript
interface SavedMediaFile {
  id: string                    // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —Ñ–∞–π–ª–∞
  originalPath: string          // –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
  relativePath?: string         // –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å (–µ—Å–ª–∏ –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞)
  name: string                  // –ò–º—è —Ñ–∞–π–ª–∞
  size: number                  // –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
  lastModified: number          // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
  isVideo: boolean              // –¢–∏–ø —Ñ–∞–π–ª–∞
  isAudio: boolean
  isImage: boolean
  metadata: {                   // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª–∞
    duration?: number
    startTime?: number
    createdAt?: string
    probeData?: FfprobeData
  }
  status: FileStatus            // –°—Ç–∞—Ç—É—Å —Ñ–∞–π–ª–∞
  lastChecked: number           // –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
}
```

### 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ `ProjectFileService.saveProject()`:

```typescript
const projectData: ProjectFile = {
  settings: { /* –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ */ },
  mediaLibrary: {
    mediaFiles: savedMediaFiles,    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã
    musicFiles: savedMusicFiles,    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
    lastUpdated: Date.now(),
    version: "1.0.0"
  },
  browserState: { /* —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ */ },
  projectFavorites: { /* –∏–∑–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã */ },
  meta: { /* –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞ */ }
}
```

## –ü—Ä–æ—Ü–µ—Å—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤

### 1. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ `AppSettingsProvider.openProject()`:

```typescript
// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ–µ–∫—Ç–∞
const projectData = await ProjectFileService.loadProject(path)

// –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã
if (projectData.mediaLibrary) {
  const restorationResult = await restoreProjectMedia(
    projectData.mediaLibrary.mediaFiles || [],
    projectData.mediaLibrary.musicFiles || [],
    path,
    { showDialog: true }
  )
}
```

### 2. –ê–ª–≥–æ—Ä–∏—Ç–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –ø–æ–∏—Å–∫:

#### –≠—Ç–∞–ø 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º—É –ø—É—Ç–∏
```typescript
const originalExists = await fileExists(savedFile.originalPath)
if (originalExists) {
  const validation = await validateFileIntegrity(savedFile.originalPath, savedFile)
  if (validation.isValid) {
    // –§–∞–π–ª –Ω–∞–π–¥–µ–Ω –∏ –≤–∞–ª–∏–¥–µ–Ω
    return { status: 'found', restoredFile }
  }
}
```

#### –≠—Ç–∞–ø 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–º—É –ø—É—Ç–∏
```typescript
if (savedFile.relativePath) {
  const relativePath = await join(projectDir, savedFile.relativePath)
  const relativeExists = await fileExists(relativePath)
  if (relativeExists && validation.isValid) {
    // –§–∞–π–ª –Ω–∞–π–¥–µ–Ω –ø–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–º—É –ø—É—Ç–∏
    return { status: 'relocated', restoredFile, newPath: relativePath }
  }
}
```

#### –≠—Ç–∞–ø 3: –ü–æ–∏—Å–∫ –≤ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
```typescript
const alternativePaths = [
  await join(projectDir, fileName),           // –í –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
  await join(projectDir, 'media', fileName),  // –í –ø–∞–ø–∫–µ media
  await join(projectDir, 'assets', fileName), // –í –ø–∞–ø–∫–µ assets
  await join(projectDir, 'files', fileName)   // –í –ø–∞–ø–∫–µ files
]

// –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø–æ–∏—Å–∫ –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
const foundPaths = await searchFilesByName(projectDir, fileName, 3) // –ú–∞–∫—Å–∏–º—É–º 3 —É—Ä–æ–≤–Ω—è
alternativePaths.push(...foundPaths)

for (const altPath of alternativePaths) {
  if (await fileExists(altPath) && validation.isValid) {
    return { status: 'relocated', restoredFile, newPath: altPath }
  }
}
```

#### –≠—Ç–∞–ø 4: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤—ã–±–æ—Ä
–ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ `MissingFilesDialog`.

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤

```typescript
const validateFileIntegrity = async (filePath: string, saved: SavedMediaFile) => {
  const issues: string[] = []
  let confidence = 1.0

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
  if (stats.size !== saved.size) {
    issues.push(`File size mismatch`)
    confidence -= 0.3
  }

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Ä–µ–º—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Å –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å—é 1 —Å–µ–∫—É–Ω–¥–∞)
  if (Math.abs(stats.lastModified - saved.lastModified) > 1000) {
    issues.push(`Modification date mismatch`)
    confidence -= 0.2
  }

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–º—è —Ñ–∞–π–ª–∞
  if (currentName !== saved.name) {
    issues.push(`Filename mismatch`)
    confidence -= 0.1
  }

  return {
    isValid: confidence > 0.5,
    confidence: Math.max(0, confidence),
    issues
  }
}
```

## –î–∏–∞–ª–æ–≥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

`MissingFilesDialog` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

1. **–ù–∞–π—Ç–∏ —Ñ–∞–π–ª** - –æ—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
2. **–£–¥–∞–ª–∏—Ç—å –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞** - —É–¥–∞–ª–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Ñ–∞–π–ª
3. **–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å** - –æ—Å—Ç–∞–≤–∏—Ç—å —Ñ–∞–π–ª –∫–∞–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```typescript
interface MissingFilesDialogProps {
  open: boolean
  onOpenChange: (open: boolean) => void
  missingFiles: SavedMediaFile[]
  onResolve: (resolved: Array<{
    file: SavedMediaFile
    newPath?: string
    action: 'found' | 'remove'
  }>) => void
}
```

### –°–æ—Å—Ç–æ—è–Ω–∏—è —Ñ–∞–π–ª–æ–≤

- **Pending** (‚ö†Ô∏è) - –æ–∂–∏–¥–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **Found** (‚úÖ) - —Ñ–∞–π–ª –Ω–∞–π–¥–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
- **Remove** (üóëÔ∏è) - —Ñ–∞–π–ª –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞
- **Skip** (‚ùå) - —Ñ–∞–π–ª –ø—Ä–æ–ø—É—â–µ–Ω

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö ID

–ö–∞–∂–¥—ã–π –º–µ–¥–∏–∞—Ñ–∞–π–ª –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –Ω–∞ –æ—Å–Ω–æ–≤–µ:

```typescript
const generateFileId = (filePath: string, metadata: any): string => {
  const data = `${filePath}:${metadata.size || 0}:${metadata.lastModified || Date.now()}`
  const hash = btoa(data).replace(/[^a-zA-Z0-9]/g, '').substring(0, 24)
  return hash || `fallback_${Date.now()}`
}
```

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å ID –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å ID –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- –î–µ—Ç–µ–∫—Ü–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–∞

## –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏

–î–ª—è —Ñ–∞–π–ª–æ–≤, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö –ø—Ä–æ–µ–∫—Ç–∞, —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏:

```typescript
const calculateRelativePath = async (filePath: string, projectPath: string) => {
  const projectDir = await dirname(projectPath)

  if (filePath.startsWith(projectDir)) {
    // –£–±–∏—Ä–∞–µ–º –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
    const relativePath = filePath.substring(projectDir.length).replace(/^[/\\]/, '')
    return relativePath || undefined
  }

  return undefined
}
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –º–µ–∂–¥—É –∫–æ–º–ø—å—é—Ç–µ—Ä–∞–º–∏
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—å —Ñ–∞–π–ª—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### Graceful Degradation

–°–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ç–∞–∫, —á—Ç–æ–±—ã –æ—à–∏–±–∫–∏ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–ª–∏ —Ä–∞–±–æ—Ç—É:

1. **–û—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞** - –ø—Ä–æ–µ–∫—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–µ–∑ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
2. **–û—à–∏–±–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è** - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –Ω–æ –ø—Ä–æ–µ–∫—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
3. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã** - –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```typescript
console.log('–ù–∞—á–∏–Ω–∞–µ–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤...')
console.log('–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:', restorationResult.stats)
console.warn('–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω:', savedFile.originalPath)
console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏:', error)
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏** - —Ñ–∞–π–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≥—Ä—É–ø–ø–∞–º–∏
2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–æ–∫ –∫—ç—à–∏—Ä—É—é—Ç—Å—è
3. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
4. **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** - UI –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ú–∞–∫—Å–∏–º—É–º 1000 —Ñ–∞–π–ª–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è)
- –¢–∞–π–º–∞—É—Ç 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ 10 –ú–ë

## –ú–∏–≥—Ä–∞—Ü–∏—è –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç—ã –∏–º–µ—é—Ç –≤–µ—Ä—Å–∏—é —Ñ–æ—Ä–º–∞—Ç–∞:

```typescript
meta: {
  version: "1.0.0",
  createdAt: Date.now(),
  lastModified: Date.now(),
  originalPlatform: "darwin" | "win32" | "linux"
}
```

### –ú–∏–≥—Ä–∞—Ü–∏—è

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è:

```typescript
const migrateProject = (project: ProjectFile): ProjectFile => {
  // –õ–æ–≥–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏
  return project
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∫—Ä—ã—Ç–∞ unit-—Ç–µ—Å—Ç–∞–º–∏:

- `saved-media-utils.test.ts` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç
- –ú–æ–∫–∏ –¥–ª—è Tauri API
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é:

```typescript
const validateProjectStructure = (project: any): void => {
  if (!project || typeof project !== 'object') {
    throw new Error('Invalid project structure')
  }

  if (!project.settings || !project.meta) {
    throw new Error('Missing required fields')
  }

  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏...
}
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞

- –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è/–∑–∞–ø–∏—Å–∏
- –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –¥–æ—Å—Ç—É–ø–æ–º
- –ü—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º —Å–∞–Ω–∏—Ç–∏–∑–∏—Ä—É—é—Ç—Å—è

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—É—Ç–µ–π** - –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
2. **–û–±–ª–∞—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –æ–±–ª–∞–∫–µ
3. **–£–º–Ω—ã–π –ø–æ–∏—Å–∫** - –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
4. **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä** - –º–∏–Ω–∏–∞—Ç—é—Ä—ã –≤ –¥–∏–∞–ª–æ–≥–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
5. **Batch –æ–ø–µ—Ä–∞—Ü–∏–∏** - –º–∞—Å—Å–æ–≤–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
